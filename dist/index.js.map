{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import * as csv from 'csv-stream';\r\nimport { open } from 'node:fs/promises';\r\nimport * as pe from 'post-entity';\r\n\r\nconst file = process.argv[2] || 'tests/test.csv' || '';\r\n\r\nif (file === '') {\r\n  throw new RangeError();\r\n}\r\n\r\nconst tokens = {};\r\n// Initialize the parser\r\nconst options = {\r\n  delimiter: '\\t',\r\n  endLine: '\\n',\r\n  columnOffset: 0,\r\n  escapeChar: '\"',\r\n  enclosedChar: '\"',\r\n};\r\n\r\nconst csvStream = csv.createStream(options);\r\n\r\nlet prompt = `Using a list of words where the number after the comma is how frequently the word is used, please summarize the personality, interests, fears, and hopes of the person using these words from the list (and account for frequency): \r\n\r\n`;\r\n\r\n/**\r\n *\r\n */\r\nasync function main() {\r\n  const fd = await open(file, 'r');\r\n  const stream = fd.createReadStream();\r\n  stream\r\n    .pipe(csvStream)\r\n\r\n    .on('data', function (data) {\r\n      // outputs an object containing a set of key/value pair representing a line found in the csv file.\r\n      if (data.retweet !== 'False') {\r\n        return;\r\n      }\r\n\r\n      if (data.language !== 'en') {\r\n        return;\r\n      }\r\n\r\n      const text = pe\r\n        .process(data.tweet)\r\n        .filter((tweet) => tweet.type === 'text')\r\n        .map((tweet) => tweet.raw.trim());\r\n\r\n      for (const words of text) {\r\n        const split = words.split(' ');\r\n        for (const element of split) {\r\n          const token = element.trim();\r\n          if (token !== '') {\r\n            if (tokens[token] === undefined) {\r\n              tokens[token] = 0;\r\n            }\r\n            tokens[token] += 1;\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    .on('close', function () {\r\n      const keys = Object.keys(tokens);\r\n\r\n      for (const key of keys) {\r\n        if (tokens[key] === 1) {\r\n          continue;\r\n        }\r\n        prompt += `${key}:${tokens[key]} `;\r\n      }\r\n\r\n      console.log(prompt);\r\n    });\r\n}\r\n\r\nmain();\r\n"],"mappings":"2cAAA,IAAAA,EAAqB,yBACrBC,EAAqB,uBACrBC,EAAoB,0BAEdC,EAAO,QAAQ,KAAK,CAAC,GAAK,iBAEhC,GAAIA,IAAS,GACX,MAAM,IAAI,WAGZ,IAAMC,EAAS,CAAC,EAEVC,EAAU,CACd,UAAW,IACX,QAAS;AAAA,EACT,aAAc,EACd,WAAY,IACZ,aAAc,GAChB,EAEMC,EAAgB,eAAaD,CAAO,EAEtCE,EAAS;AAAA;AAAA,EAOb,eAAeC,GAAO,EACT,QAAM,QAAKL,EAAM,GAAG,GACb,iBAAiB,EAEhC,KAAKG,CAAS,EAEd,GAAG,OAAQ,SAAUG,EAAM,CAM1B,GAJIA,EAAK,UAAY,SAIjBA,EAAK,WAAa,KACpB,OAGF,IAAMC,EACH,UAAQD,EAAK,KAAK,EAClB,OAAQE,GAAUA,EAAM,OAAS,MAAM,EACvC,IAAKA,GAAUA,EAAM,IAAI,KAAK,CAAC,EAElC,QAAWC,KAASF,EAAM,CACxB,IAAMG,EAAQD,EAAM,MAAM,GAAG,EAC7B,QAAWE,KAAWD,EAAO,CAC3B,IAAME,EAAQD,EAAQ,KAAK,EACvBC,IAAU,KACRX,EAAOW,CAAK,IAAM,SACpBX,EAAOW,CAAK,EAAI,GAElBX,EAAOW,CAAK,GAAK,IAIzB,CAAC,EAEA,GAAG,QAAS,UAAY,CACvB,IAAMC,EAAO,OAAO,KAAKZ,CAAM,EAE/B,QAAWa,KAAOD,EACZZ,EAAOa,CAAG,IAAM,IAGpBV,GAAU,GAAGU,KAAOb,EAAOa,CAAG,MAGhC,QAAQ,IAAIV,CAAM,CACpB,CAAC,CACL,CAEAC,EAAK","names":["csv","import_promises","pe","file","tokens","options","csvStream","prompt","main","data","text","tweet","words","split","element","token","keys","key"]}